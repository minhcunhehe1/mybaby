<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Album K√Ω ·ª®c ‚Äî Phi√™n b·∫£n ho√†n ch·ªânh</title>
  <style>
    :root{--paper:#f6eee2;--accent:#b86b66;--muted:#f7d6dc;--text:#4a2b2a}
    *{box-sizing:border-box}
    body{margin:0;padding:0;font-family:Inter, system-ui, Arial, sans-serif;background:var(--paper);color:var(--text);min-height:100vh;overflow-x:hidden;position:relative}

    /* Floating hearts background */
    .heart{position:fixed;bottom:-40px;pointer-events:none;font-size:20px;animation:floatUp 5s linear infinite}
    @keyframes floatUp{0%{transform:translateY(0) rotate(0) scale(1);opacity:1}100%{transform:translateY(-900px) rotate(120deg) scale(1.7);opacity:0}}

    .container{width:100%;max-width:980px;margin:28px auto;padding:20px;border-radius:14px;background:linear-gradient(180deg, rgba(255,250,244,0.95), rgba(246,238,226,0.95));box-shadow:0 14px 40px rgba(74,43,42,0.08)}
    h1{margin:0 0 6px 0;font-size:1.25rem;text-align:center}
    p.lead{margin:6px 0 18px 0;text-align:center;color:rgba(74,43,42,0.7)}

    /* topics list */
    .topics{display:flex;flex-direction:column;gap:14px;margin-top:12px}
    .topic{display:flex;gap:14px;align-items:center;padding:14px;border-radius:12px;background:rgba(255,255,255,0.7);cursor:pointer;border:1px solid rgba(74,43,42,0.04);box-shadow:0 8px 18px rgba(74,43,42,0.04);transition:transform 220ms,box-shadow 220ms}
    .topic:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(74,43,42,0.08)}
    .topic .thumb{width:120px;height:90px;background-size:cover;background-position:center;border-radius:8px;flex-shrink:0;border:8px solid #fff;box-shadow:0 8px 18px rgba(74,43,42,0.04)}
    .topic .info{flex:1}
    .topic h3{margin:0;font-size:1.05rem}
    .topic p{margin:6px 0 0 0;color:rgba(74,43,42,0.6)}

    /* album overlay */
    .overlay{position:fixed;inset:0;background:linear-gradient(rgba(10,6,6,0.55), rgba(10,6,6,0.55));display:none;align-items:center;justify-content:center;padding:20px;z-index:9999}
    .album{width:100%;max-width:840px;background:linear-gradient(180deg,#fff,#fffaf6);border-radius:12px;padding:18px;box-shadow:0 30px 60px rgba(0,0,0,0.45);position:relative}
    .album .topbar{display:flex;justify-content:space-between;align-items:center;gap:12px}
    .album h2{margin:0;font-size:1.1rem}
    .backBtn{background:var(--muted);border:none;padding:8px 12px;border-radius:10px;cursor:pointer}

    .slideshow{position:relative;height:520px;margin-top:12px;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .slide{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity 0.9s ease-in-out, transform 0.9s ease-in-out}

    /* page flip effect */
    .slide.flipOut{transform:rotateY(90deg);opacity:0}
    .slide.flipIn{transform:rotateY(-90deg);opacity:0}
    .slide.show{opacity:1;transform:rotateY(0deg)}

    .polaroid{width:70%;max-width:640px;background:#fff;border-radius:10px;padding:16px;padding-bottom:28px;box-shadow:0 20px 40px rgba(74,43,42,0.12);display:flex;flex-direction:column;align-items:center}
    .polaroid .photo{width:100%;height:360px;background-size:cover;background-position:center;border-radius:6px}
    .polaroid .caption{margin-top:12px;color:var(--text);text-align:center;font-style:italic}

    .controls{display:flex;gap:8px;justify-content:center;margin-top:12px}
    .controls button{background:var(--accent);color:white;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}

    footer{margin-top:16px;text-align:center;color:rgba(74,43,42,0.6)}

    @media (max-width:900px){.polaroid{width:92%}.slide{position:relative;height:auto}.slideshow{height:420px}.topic .thumb{width:100px;height:70px}}
  </style>
</head>
<body>

  <!-- Floating hearts background -->
  <script>
    function createHeart(){ 
      const el=document.createElement('div');
      el.className='heart';
      el.style.left=Math.random()*100+'vw';
      el.style.fontSize=(14+Math.random()*36)+'px';
      el.style.color='rgba(184,107,102,0.95)';
      el.innerText='‚ù§Ô∏è';
      document.body.appendChild(el);
      setTimeout(()=>el.remove(),5200);
    }
    setInterval(createHeart,600);
  </script>

  <div class="container">
    <h1>Nh·ªØng K√Ω ·ª®c C·ªßa Ch√∫ng M√¨nh üíû</h1>
    <p class="lead">Ch·ªçn m·ªôt ch·ªß ƒë·ªÅ ƒë·ªÉ xem l·∫°i album ‚Äî m·ªói ·∫£nh c√≥ m·ªôt ghi ch√∫ nh·ªè t·ª´ anh g·ª≠i em.</p>

    <section class="topics" id="topics"></section>

    <footer>G·ª≠i b·ªüi: Anh lu√¥n nh·ªõ em ‚Ä¢ ‚ù§Ô∏è</footer>
  </div>

  <!-- Album overlay -->
  <div class="overlay" id="overlay">
    <div class="album" role="dialog" aria-modal="true">
      <div class="topbar">
        <h2 id="albumTitle">Album</h2>
        <button class="backBtn" id="backBtn">üîô Quay l·∫°i</button>
      </div>

      <div class="slideshow" id="slideshow"></div>

      <div class="controls">
        <button id="prev">‚Äπ Tr∆∞·ªõc</button>
        <button id="pause">T·∫°m d·ª´ng</button>
        <button id="next">Sau ‚Ä∫</button>
      </div>
    </div>
  </div>

  <audio id="bgMusic" loop preload="auto">
    <source src="https://files.catbox.moe/diyvx1.mp3" type="audio/mpeg">
  </audio>

  <script>
    /* -------- 1. Album Data -------- */
    const topicsData = [
      {
        id: 't1',
        title: 'K·ª∑ ni·ªám b√™n nhau',
        desc: 'Nh·ªØng kho·∫£nh kh·∫Øc ·∫•m √°p',
        images: [
          { src: 'https://picsum.photos/seed/km1/1200/900', note: 'L·∫ßn ƒë·∫ßu m√¨nh ch·ª•p chung m√† c·∫£ hai ƒë·ªÅu c∆∞·ªùi th·∫≠t l√≤ng.' },
          { src: 'https://picsum.photos/seed/km2/1200/900', note: 'H√¥m ƒë√≥ em m·ªát nh∆∞ng v·∫´n r√°ng ƒëi c√πng anh.' },
          { src: 'https://picsum.photos/seed/km3/1200/900', note: 'Kho·∫£nh kh·∫Øc nh√¨n nhau kh√¥ng n√≥i g√¨ m√† v·∫´n hi·ªÉu.' },
          { src: 'https://picsum.photos/seed/km4/1200/900', note: 'T·∫•m n√†y anh ch·ª•p l√©n, nh∆∞ng l√† m·ªôt trong nh·ªØng t·∫•m anh th√≠ch nh·∫•t.' }
        ]
      },
      {
        id: 't2',
        title: 'Nh·ªØng chuy·∫øn ƒëi',
        desc: 'C√πng nhau ƒëi kh·∫Øp n∆°i',
        images: [
          { src: 'https://picsum.photos/seed/ct1/1200/900', note: 'Chuy·∫øn ƒëi m√† c·∫£ hai ƒë·ª©a ƒë·ªÅu c√£i nhau, nh∆∞ng cu·ªëi c√πng v·∫´n n·∫Øm tay.' },
          { src: 'https://picsum.photos/seed/ct2/1200/900', note: 'Em n√≥i mu·ªën ng·∫Øm ho√†ng h√¥n, anh nh·ªõ c√°ch em nh√¨n b·∫ßu tr·ªùi h∆°n c·∫£.' },
          { src: 'https://picsum.photos/seed/ct3/1200/900', note: 'L·∫°c ƒë∆∞·ªùng nh∆∞ng vui v·∫≠t v√£, mi·ªÖn l√† c√≤n ƒëi c√πng nhau.' },
          { src: 'https://picsum.photos/seed/ct4/1200/900', note: 'N·∫øu ƒë∆∞·ª£c, anh v·∫´n ch·ªçn c√πng em ƒëi l·∫°i t·ª´ ƒë·∫ßu chuy·∫øn n√†y.' }
        ]
      },
      {
        id: 't3',
        title: 'Sinh nh·∫≠t & b·∫•t ng·ªù',
        desc: 'Nh·ªØng ng√†y ƒë·∫∑c bi·ªát c·ªßa em v√† t·ª•i m√¨nh',
        images: [
          { src: 'https://picsum.photos/seed/sb1/1200/900', note: 'Sinh nh·∫≠t nƒÉm ƒë√≥ em ∆∞·ªõc ƒëi·ªÅu g√¨, anh v·∫´n lu√¥n t√≤ m√≤.' },
          { src: 'https://picsum.photos/seed/sb2/1200/900', note: 'Chi·∫øc b√°nh nh·ªè nh∆∞ng n·ª• c∆∞·ªùi em th√¨ si√™u to kh·ªïng l·ªì.' },
          { src: 'https://picsum.photos/seed/sb3/1200/900', note: 'Anh kh√¥ng gi·ªèi b·∫•t ng·ªù, nh∆∞ng lu√¥n mu·ªën l√†m em vui.' },
          { src: 'https://picsum.photos/seed/sb4/1200/900', note: 'N·∫øu c√≥ nƒÉm sau, anh h·ª©a s·∫Ω l√†m t·ªët h∆°n cho em.' }
        ]
      },
      {
        id: 't4',
        title: 'Kho·∫£nh kh·∫Øc d·ªÖ th∆∞∆°ng c·ªßa em',
        desc: 'Nh·ªØng bi·ªÉu c·∫£m khi·∫øn anh tan ch·∫£y',
        images: [
          { src: 'https://picsum.photos/seed/cute1/1200/900', note: 'C√°i l√∫m ƒë·ªìng ti·ªÅn n√†y l√† t·ªôi √°c, bi·∫øt kh√¥ng.' },
          { src: 'https://picsum.photos/seed/cute2/1200/900', note: 'Em nhƒÉn m·∫∑t v·∫≠y th√¥i ch·ª© v·∫´n d·ªÖ th∆∞∆°ng.' },
          { src: 'https://picsum.photos/seed/cute3/1200/900', note: 'T·∫•m n√†y em ch√™ x·∫•u, c√≤n anh th·∫•y ƒë√∫ng l√† ‚Äúv·ª£ t∆∞∆°ng lai‚Äù.' },
          { src: 'https://picsum.photos/seed/cute4/1200/900', note: 'M·ªói bi·ªÉu c·∫£m c·ªßa em ƒë·ªÅu l√† m·ªôt l√Ω do ƒë·ªÉ anh th∆∞∆°ng th√™m.' }
        ]
      },
      {
        id: 't5',
        title: 'Nh·ªØng d√≤ng nh·∫Øn g·ª≠i',
        desc: 'L·ªùi anh mu·ªën n√≥i v·ªõi em',
        images: [
          { src: 'https://picsum.photos/seed/msg1/1200/900', note: 'C·∫£m ∆°n em v√¨ ƒë√£ t·ª´ng ch·ªçn anh.' },
          { src: 'https://picsum.photos/seed/msg2/1200/900', note: 'Xin l·ªói v√¨ nh·ªØng l√∫c anh l√†m em bu·ªìn.' },
          { src: 'https://picsum.photos/seed/msg3/1200/900', note: 'Anh v·∫´n ƒëang h·ªçc c√°ch tr·ªü th√†nh phi√™n b·∫£n t·ªët h∆°n.' },
          { src: 'https://picsum.photos/seed/msg4/1200/900', note: 'N·∫øu em cho ph√©p, anh mu·ªën l·∫°i ƒë∆∞·ª£c c√πng em vi·∫øt ti·∫øp.' }
        ]
      }
    ];

    /* -------- 2. Core Logic -------- */
    const topicsEl=document.getElementById('topics');
    const overlay=document.getElementById('overlay');
    const slideshow=document.getElementById('slideshow');
    const albumTitle=document.getElementById('albumTitle');
    const backBtn=document.getElementById('backBtn');
    const prevBtn=document.getElementById('prev');
    const nextBtn=document.getElementById('next');
    const pauseBtn=document.getElementById('pause');
    const bgMusic=document.getElementById('bgMusic');

    function buildTopics(){
      topicsEl.innerHTML='';
      topicsData.forEach(t=>{
        const el=document.createElement('div');
        el.className='topic';
        el.dataset.id=t.id;
        el.innerHTML=`<div class="thumb" style="background-image:url('${t.images[0].src}')"></div>
                      <div class="info"><h3>${t.title}</h3><p>${t.desc}</p></div>`;
        topicsEl.appendChild(el);
      });
    }
    buildTopics();

    let currentTopic=null, slides=[], currentIndex=0, slideInterval=null, playing=true;
    const intervalMs=3500;

    function openAlbum(topicId){
      const topic=topicsData.find(x=>x.id===topicId);
      if(!topic) return;
      currentTopic=topic;
      albumTitle.textContent=topic.title;
      slideshow.innerHTML='';
      slides=[];
      topic.images.forEach((img,i)=>{
        const s=document.createElement('div');
        s.className='slide';
        s.dataset.index=i;
        s.innerHTML=`<div class="polaroid">
                        <div class="photo" style="background-image:url('${img.src}')"></div>
                        <div class="caption">${img.note}</div>
                      </div>`;
        slideshow.appendChild(s);
        slides.push(s);
      });
      overlay.style.display='flex';
      currentIndex=0;
      showSlide(0,true);
      bgMusic.play().catch(()=>{});
      playing=true;
      pauseBtn.textContent='T·∫°m d·ª´ng';
      startAuto();
    }

    function showSlide(i,instant){
      slides.forEach((s,idx)=>{
        s.classList.remove('show','flipOut','flipIn');
        if(idx===i){
          if(!instant) s.classList.add('flipIn');
          setTimeout(()=>s.classList.add('show'),100);
        }
      });
    }

    function nextSlide(){
      if(!slides.length)return;
      slides[currentIndex].classList.add('flipOut');
      currentIndex=(currentIndex+1)%slides.length;
      setTimeout(()=>showSlide(currentIndex,false),300);
    }

    function prevSlide(){
      if(!slides.length)return;
      slides[currentIndex].classList.add('flipOut');
      currentIndex=(currentIndex-1+slides.length)%slides.length;
      setTimeout(()=>showSlide(currentIndex,false),300);
    }

    function startAuto(){stopAuto();slideInterval=setInterval(nextSlide,intervalMs);}
    function stopAuto(){if(slideInterval)clearInterval(slideInterval);}

    topicsEl.addEventListener('click',e=>{
      const t=e.target.closest('.topic');
      if(!t)return;
      openAlbum(t.dataset.id);
    });

    backBtn.addEventListener('click',()=>{overlay.style.display='none';stopAuto();});
    nextBtn.addEventListener('click',nextSlide);
    prevBtn.addEventListener('click',prevSlide);

    pauseBtn.addEventListener('click',()=>{
      if(playing){stopAuto();playing=false;pauseBtn.textContent='Ph√°t l·∫°i';}
      else{startAuto();playing=true;pauseBtn.textContent='T·∫°m d·ª´ng';}
    });

    overlay.addEventListener('click',e=>{
      if(e.target===overlay){overlay.style.display='none';stopAuto();}
    });

    document.addEventListener('keydown',e=>{
      if(overlay.style.display==='flex'){
        if(e.key==='ArrowRight')nextSlide();
        if(e.key==='ArrowLeft')prevSlide();
        if(e.key==='Escape'){overlay.style.display='none';stopAuto();}
      }
    });
  </script>
</body>
</html>
